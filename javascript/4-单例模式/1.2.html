<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <title>Document</title>
    <link rel="stylesheet" href="/skin/plugs/normalize-css/normalize.css"/>
    <link rel="stylesheet" href="/skin/css/base.css"/>
    <script src="http://www.zczj.com/skin/js/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/vue/2.0.5/vue.min.js"></script>
    <script src="//cdn.bootcss.com/vue-resource/1.0.3/vue-resource.min.js"></script>
    <script src="/skin/js/util.js"></script>
  </head>
  <body>
    <section id="header">
      <div class="header-top">
        <div class="container clearfix"></div>
      </div>
      <header>
        <div class="header-warp">
          <div class="container clearfix"></div>
        </div>
      </header>
    </section>
    <!--==================================================-->
    <div id="container" ref="container" class="container"></div>
    <script>
      ;(function(){
      /*
        我们现在的目标是实现一个“透明”的单例类，用户从这个类中创建对象的时候，可以像使
        用其他任何普通类一样。在下面的例子中，我们将使用 CreateDiv 单例类，它的作用是负责在页
        面中创建唯一的 div 节点，代码如下：
      */
        var CreateDiv = (function(){
          var instance;
      
          var CreateDiv = function(html){
            if(instance){
              return instance;
            }
            this.html = html;
            this.init();
            return instance = this;
          };
          CreateDiv.prototype.init = function(){
            var div = document.createElement('div');
            div.innerHTML = this.html;
            document.body.appendChild(div);
          };
      
          return CreateDiv;
        })();
      
        var a = new CreateDiv('sven1');
        var b = new CreateDiv('sven2');
      
        console.log( a===b);
        /*
          为了把 instance 封装起来，我们使用了自执行的匿名函数和闭包，并且让这个匿名函数返回
          真正的 Singleton 构造方法，这增加了一些程序的复杂度，阅读起来也不是很舒服
        */
        
        /*
          在这段代码中， CreateDiv 的构造函数实际上负责了两件事情。第一是创建对象和执行初始
          化 init 方法，第二是保证只有一个对象。虽然我们目前还没有接触过“单一职责原则”的概念，
          但可以明确的是，这是一种不好的做法，至少这个构造函数看起来很奇怪。
          假设我们某天需要利用这个类，在页面中创建千千万万的 div ，即要让这个类从单例类变成
          一个普通的可产生多个实例的类，那我们必须得改写 CreateDiv 构造函数，把控制创建唯一对象
          的那一段去掉，这种修改会给我们带来不必要的烦恼。
        */
      })();
    </script>
    <!--==================================================-->
    <div id="dibu" class="footer">
      <div class="info">
        <div class="container clearfix"></div>
      </div>
      <div class="bottom">
        <div class="container"><span>老苏练习记录</span>
        </div>
      </div>
      <script src="/skin/js/common.js"></script>
      <script src="/skin/js/footer.js"></script>
    </div>
  </body>
</html>